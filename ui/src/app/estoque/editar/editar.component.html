<div class="col-12 offset-lg-1 col-lg-10">
  <div class="card">
    <div class="card-header text-center">
      <div class="col-12 col-md-12">
        <a (click)="help()" class="text-dark" style="text-decoration: none; float: right"><i
          class="fal fa-question-circle"></i></a>
      </div>
      <h3>{{title}}</h3>
    </div>
    <div class="card-body">
      <form #pform="ngForm">
        <div class="form-row">
          <div class="col-md-6">
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Nome <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="text" class="form-control" required [(ngModel)]="p.nome" placeholder="Memória RAM"
                       name="nome" #nome="ngModel" (invalid)="nome_valido" (blur)="confirmaNome()"
                       [ngClass]="((nome.invalid && nome.touched) || nome_valido) ? 'is-invalid' : ''" [disabled]="!edit">
                <span class="text-danger" *ngIf="nome_valido">Nome já utilizado!</span>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Preço <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="text" class="form-control" required [(ngModel)]="p.preco"
                       placeholder="R$ 9.999,99" currencyMask name="preco" #preco="ngModel"
                       [options]="{prefix: 'R$ ', thousands: '.', decimal: ','} " (blur)="precoPositivo()"
                       [ngClass]="((preco.invalid && preco.touched) || preco_valido) ? 'is-invalid' : ''" [disabled]="!edit">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Desconto <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="text" class="form-control" required [(ngModel)]="p.desconto"
                       placeholder="R$ 9.999,99" currencyMask name="desconto" #desconto="ngModel"
                       [options]="{prefix: 'R$', thousands: '.', decimal: ','} " (blur)="descontoValido()"
                       [ngClass]="((desconto.invalid && desconto.touched) || desconto_valido) ? 'is-invalid' : ''" [disabled]="!edit">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Quantidade <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="number" class="form-control" required [(ngModel)]="p.qtd" name="qtd" #qtd="ngModel" [disabled]="true">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Un/Lote <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="number" class="form-control" required [(ngModel)]="p.unidadeLote"
                       placeholder="999" name="unidadeLote" #unidadeLote="ngModel" (blur)="lotePositivo()"
                       [ngClass]="((unidadeLote.invalid && unidadeLote.touched) || lote_valido) ? 'is-invalid' : ''" [disabled]="!edit">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Código do Produto <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <input type="text" class="form-control" required [(ngModel)]="p.sku" name="sku" #sku="ngModel" [disabled]="true">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-md-4 col-form-label">Categoria <span class="text-danger">*</span></label>
              <div class="col-md-8">
                <select class="custom-select" name="categoria" #cat="ngModel" required [(ngModel)]="p.categoriaId" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let c of categoria" value="{{c.id}}" selected="{{p.categoriaId == c.id}}" [disabled]="!edit">{{c.nome}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group row">
              <label class="col-md-3 col-form-label">Descrição <span class="text-danger">*</span></label>
              <div class="col-md-9">
                <input type="text" class="form-control" required [(ngModel)]="p.descricao"
                       placeholder="Informações do produto" name="descricao" #descricao="ngModel"
                       [ngClass]="(descricao.invalid && descricao.touched) ? 'is-invalid' : ''" [disabled]="!edit">
              </div>
            </div>
          </div>
        </div>

        <div class="row" *ngIf="edit">
          <div class="col">
            <button href="#" class="btn btn-block btn-primary" (click)="editar()" type="submit"
                    [disabled]="pform.invalid || nome_valido || preco_valido || desconto_valido || lote_valido">Atualizar</button>
          </div>
          <div class="col">
            <button class="btn btn-secondary btn-block" (click)="back()"><i class="fal fa-arrow-left"></i> Voltar</button>
          </div>
        </div>
        <div class="row" *ngIf="!edit">
          <div class="col">
            <button class="btn btn-secondary btn-block" (click)="back()"><i class="fal fa-arrow-left"></i> Voltar</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
